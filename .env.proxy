# .env.proxy
#
# Local development configuration for The Quiet Feed
# Features:
#   - HTTPS with mkcert certificates (local.thequietfeed.com:3443)
#   - DynamoDB (dynalite) storage
#   - Mock OAuth2 server
#
# Setup:
#   1. Run: npm run https:setup
#   2. Add to /etc/hosts: 127.0.0.1 local.thequietfeed.com
#   3. Run: npm start
#
DIY_SUBMIT_ENV_FILEPATH=.env.proxy
DOTENV_CONFIG_QUIET=true
ENVIRONMENT_NAME=proxy
DEPLOYMENT_NAME=proxy
DIY_SUBMIT_BASE_URL=https://local.thequietfeed.com:3443/

LOG_TO_CONSOLE=true
LOG_TO_FILE=true
CLOUD_TRAIL_ENABLED=

GOOGLE_CLIENT_SECRET_ARN=
COGNITO_USER_POOL_ID=
COGNITO_CLIENT_ID=
COGNITO_BASE_URI=
USER_SUB_HASH_SALT=local-development-salt-not-for-production
BUNDLE_DYNAMODB_TABLE_NAME=test-bundle-table
SQS_QUEUE_URL=none
# Local DynamoDB endpoint - set by behaviour tests dynamically via AWS_ENDPOINT_URL_DYNAMODB env var
# This value is a fallback; tests set the real ephemeral port value
AWS_ENDPOINT_URL_DYNAMODB=
ACCESS_LOG_GROUP_RETENTION_PERIOD_DAYS=

TEST_SERVER_HTTP_PORT=3000
TEST_SERVER_HTTPS_PORT=3443
TEST_SERVER_HTTP=run
USE_HTTPS=true
TEST_MOCK_OAUTH2=run
TEST_AUTH_PROVIDER=mock
TEST_AUTH_USERNAME=user
TEST_AUTH_PASSWORD=
TEST_DYNAMODB=run

TEST_MFA_ENABLED=true
TEST_MFA_TYPE=TOTP
TEST_MFA_TIMESTAMP=2026-01-08T00:09:01Z

TEST_BUNDLE_EXPIRY_DATE=2025-12-31
TEST_BUNDLE_USER_LIMIT=1000
TEST_BUNDLE_MOCK=true

#TEST_WIREMOCK=record
#TEST_WIREMOCK=mock
WIREMOCK_MOCK_ENVIRONMENT=proxy
WIREMOCK_PORT=9090
WIREMOCK_RECORD_OUTPUT_DIR=wiremock-recordings/proxy
